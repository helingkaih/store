(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Jc03:function(t,e,n){"use strict";function i(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r}n.r(e),n.d(e,"EXAMPLE_COMPONENTS",function(){return kt}),n.d(e,"EXAMPLES_MODULE",function(){return It});var o=n("EM62");const s="__THY_META__",r=new o.r("ROOT_STATE_TOKEN"),c=new o.r("FEATURE_STATE_TOKEN");Error;let a=null;function l(){a=null}let d=(()=>{class t{constructor(t){a=t.injector,t.onDestroy(l)}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(o.y))},t.\u0275mod=o.Lb({type:t}),t.\u0275inj=o.Kb({}),t})(),h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Lb({type:t}),t.\u0275inj=o.Kb({}),t})(),u=(()=>{class t{static forRoot(t=[]){return{ngModule:d,providers:[...t,{provide:r,useValue:t}]}}static forFeature(t=[]){return{ngModule:h,providers:[...t,{provide:c,multi:!0,useValue:t}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Lb({type:t}),t.\u0275inj=o.Kb({}),t})();var p=n("C05f"),g=n("GoAz"),f=n("IdLP"),b=n("YtkY"),m=n("ZTXN"),_=n("EWqr");class x extends _.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var O=n("DG/E");class C extends O.a{}const y=new C(x);var w=n("bwdy"),M=n("5uGe"),P=n("6Oco"),v=n("ROBh");function S(t,e){return new f.a(e?n=>e.schedule(T,0,{error:t,subscriber:n}):e=>e.error(t))}function T({error:t,subscriber:e}){e.error(t)}let k=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(v.a)(this.value);case"E":return S(this.error);case"C":return Object(P.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();class I extends M.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(I.dispatch,this.delay,new E(t,this.destination)))}_next(t){this.scheduleMessage(k.createNext(t))}_error(t){this.scheduleMessage(k.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(k.createComplete()),this.unsubscribe()}}class E{constructor(t,e){this.notification=t,this.destination=e}}var j=n("MiDb"),N=n("yTkW");class z extends m.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new R(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=n.length;let s;if(this.closed)throw new j.a;if(this.isStopped||this.hasError?s=w.a.EMPTY:(this.observers.push(t),s=new N.a(this,t)),i&&t.add(t=new I(t,i)),e)for(let r=0;r<o&&!t.closed;r++)t.next(n[r]);else for(let r=0;r<o&&!t.closed;r++)t.next(n[r].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||y).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,i=this._events,o=i.length;let s=0;for(;s<o&&!(t-i[s].time<n);)s++;return o>e&&(s=Math.max(s,o-e)),s>0&&i.splice(0,s),i}}class R{constructor(t,e){this.time=t,this.value=e}}function $(t,e,n){let i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:i}){let o,s,r=0,c=!1,a=!1;return function(l){let d;r++,!o||c?(c=!1,o=new z(t,e,i),d=o.subscribe(this),s=l.subscribe({next(t){o.next(t)},error(t){c=!0,o.error(t)},complete(){a=!0,s=void 0,o.complete()}}),a&&(s=void 0)):d=o.subscribe(this),this.add(()=>{r--,d.unsubscribe(),d=void 0,s&&!a&&n&&0===r&&(s.unsubscribe(),s=void 0,o=void 0)})}}(i))}class D{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new A(t,this.compare,this.keySelector))}}class A extends M.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var B=n("HM3f"),F=n("TLy2"),K=n("8j5Y");class W{constructor(){if(this._devTools=null,this._window=window,null==this._window)return;const t=this._window.__REDUX_DEVTOOLS_EXTENSION__||this._window.devToolsExtension;if(!t)return console.log("\u672a\u5b89\u88c5Chrome\u6d4f\u89c8\u5668\u7684\u62d3\u5c55\u63d2\u4ef6: Redux DevTools."),void console.log("\u63d2\u4ef6\u4e0b\u8f7d\u5730\u5740: https://www.chromefor.com/redux-devtools_v2-17-0/");this._devTools=t.connect({name:"NgxStore v0.6.0"})}handleNewState(t,e){this.isConnectSuccessed()&&this._devTools.send(t,e)}isConnectSuccessed(){return null!==this._devTools}}let L,V=(()=>{class t{static changeAction(t){this.actionName=t}static getActionName(){return this.actionName}}return t.actionName="",t})(),U=(()=>{class t{constructor(){this.connectSuccessed=!1,this._containers=new p.a(new Map),this._plugin=(window.___ReduxDevtoolsPlugin___||(window.___ReduxDevtoolsPlugin___=new W),window.___ReduxDevtoolsPlugin___),this._combinedStateSubscription=new w.a,this._plugin.isConnectSuccessed()&&(this.connectSuccessed=!0,this._assignCombinedState(),console.log(`\u662f\u5426\u5728Angular\u5f00\u53d1\u73af\u5883\uff1a${Object(o.U)()}, \u521d\u59cb\u5316root-store`))}_assignCombinedState(){this._combinedStateSubscription=this._containers.pipe(Object(F.a)(t=>this._getCombinedState(t))).pipe(Object(b.a)(t=>{const e=V.getActionName();return{state:t.reduce((t,e)=>(t[e.containerName]=e.state,t),{}),actionName:e}})).subscribe(t=>{this._plugin.handleNewState(t.actionName,t.state)})}_getCombinedState(t){return Object(B.a)(...Array.from(t.entries()).map(([t,e])=>e.state$.pipe(Object(b.a)(e=>({containerName:t,state:e})),Object(K.a)(t=>{}))))}ngOnDestroy(){this._combinedStateSubscription.unsubscribe()}registerStore(t){if(!this.connectSuccessed)return;const e=new Map(this._containers.value);if(e.has(t.getStoreInstanceId()))throw new Error(`Store: Store with duplicate instance ID found! ${t.getStoreInstanceId()} is already registered. Please check your getStoreInstanceId() methods!`);e.set(t.getStoreInstanceId(),t),this._containers.next(e)}existStoreInstanceId(t){return!!new Map(this._containers.value).has(t)}unregisterStore(t){if(!this.connectSuccessed)return;const e=new Map(this._containers.value);e.delete(t.getStoreInstanceId()),this._containers.next(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac}),t})();function Y(){return L||(L=new U),L}function J(t,e){const n={};return t.forEach(t=>{n[t[e]]=t}),n}function X(t,e){const n={};return t.forEach((t,i)=>{n[t[e]]=i}),n}function G(t){return Array.isArray(t)?t:[t]}var H=n("4e/d"),q=n("uCWR");function Z(t,e){return e?n=>n.pipe(Z((n,i)=>Object(g.a)(t(n,i)).pipe(Object(b.a)((t,o)=>e(n,t,i,o))))):e=>e.lift(new Q(t))}class Q{constructor(t){this.project=t}call(t,e){return e.subscribe(new tt(t,this.project))}}class tt extends q.b{constructor(t,e){super(t),this.project=e,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(t){this.hasSubscription||this.tryNext(t)}tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.hasSubscription=!0,this._innerSub(e)}_innerSub(t){const e=new q.a(this),n=this.destination;n.add(e);const i=Object(q.c)(t,e);i!==e&&n.add(i)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function et(t){return function(e,n,i){const o=function(t){return t.hasOwnProperty(s)||(t[s]={actions:{},path:null,children:[],instance:null}),t[s]}(e);t||(t={type:n}),"string"==typeof t&&(t={type:t});const r=t.type;if(!t.type)throw new Error(`Action ${t.type} is missing a static "type" property`);const c=i.value;o.actions[r]={fn:n,originalFn:c,type:r},i.value=function(...i){V.changeAction(`${e.constructor.name}-${n}`);let o=c.call(this,...i);return o instanceof f.a&&(o=o.pipe(Object(H.a)(e=>Object(v.a)({status:"ERRORED",action:t,error:e})),$(),Z(t=>t&&"ERRORED"===t.status?S(t.error):Object(v.a)(t))),o.subscribe()),o}}}function nt(t){return!!t&&"function"==typeof t}let it=(()=>{class t{constructor(t){if(this.reduxToolEnabled=Object(o.U)(),this._defaultStoreInstanceId=this._getClassName(),this.state$=new p.a(t),this.initialStateCache=Object.assign({},t),this.reduxToolEnabled){const t=Y();V.changeAction(`Add-${this._defaultStoreInstanceId}`),t.registerStore(this)}}get snapshot(){return this.state$.getValue()}dispatch(t,e){V.changeAction(`${this._defaultStoreInstanceId}-${t}`);const n=this._dispatch({type:t,payload:e});return n.subscribe(),n}_dispatch(t){const e=this[s];if(!e)throw new Error(`${s} is not found, current store has not action`);const n=e.actions[t.type];if(!n)throw new Error(`${t.type} is not found`);let i=n.originalFn.call(this,this.snapshot,t.payload);return i instanceof Promise&&(i=Object(g.a)(i)),i=i instanceof f.a?i.pipe(Object(b.a)(t=>t)):new f.a(t=>{t.next({})}),i.pipe($())}select(t){return this.state$.pipe(Object(b.a)(t),t=>t.lift(new D(void 0,void 0)))}next(t){this.state$.next(t)}error(t){this.state$.error(t)}complete(){this.state$.complete()}subscribe(t,e,n){return this.state$.subscribe(t,e,n)}setState(t){nt(t)?this.next(Object.assign(Object.assign({},this.snapshot),t(this.snapshot))):this.next(Object.assign(Object.assign({},this.snapshot),t))}getState(){return this.snapshot}clearState(){this.setState(this.initialStateCache)}ngOnDestroy(){this.reduxToolEnabled&&Y().unregisterStore(this)}getStoreInstanceId(){return this._defaultStoreInstanceId}_getClassName(){const t=this.constructor.name||/function (.+)\(/.exec(this.constructor+"")[1];if(this.reduxToolEnabled){const e=Y();if(!e.existStoreInstanceId(t))return t;let n=0;for(let i=1;i<20;i++)if(!e.existStoreInstanceId(`${t}-${i}`)){n=i;break}return`${t}-${n}`}return t}}return t.\u0275fac=function(t){o.ac()},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac}),i([et()],t.prototype,"clearState",null),t})();function ot(t,e){return e&&e[t]?e[t]:"_id"}function st(t,e,n){for(const i in e)if(e.hasOwnProperty(i)){const o=e[i],s=ot(i,n),r=t[i];if(!r)throw new Error(`original reference must exist when append new reference: ${i}`);if(r instanceof Array){const e=X(t[i],s);if(o instanceof Array)o.forEach(n=>{const o=e[n[s]];o>=0?r[o]=Object.assign(Object.assign({},r[o]),n):t[i]=[...t[i],n]});else{const n=o[s],c=e[n];n>=0?r[c]=Object.assign(Object.assign({},r[c]),o):t[i]=[...t[i],o]}}else t[i]=Object.assign(Object.assign({},t[i]),o)}return t}var rt=n("5XID");class ct{constructor(t,e){this.idKey="_id",this.entities=t||[],e&&e.idKey&&(this.idKey=e.idKey)}add(t,e){const n=Object(rt.a)(t);if(0===n.length)return this.entities;if(e&&(e.afterId||e.prepend))if(e.afterId){const t=[...this.entities],i=this.entities.findIndex(t=>t[this.idKey]===e.afterId)+1;t.splice(i,0,...n),this.entities=[...t]}else e.prepend&&(this.entities=[...n,...this.entities]);else this.entities=[...this.entities,...n];return this.entities}update(t,e){const n=Object(rt.a)(t);for(let i=0;i<this.entities.length;i++){const t=this.entities[i];if(n.indexOf(t[this.idKey])>=0){const n=nt(e)?e(t):e;this.entities[i]=Object.assign(Object.assign({},t),n)}}return[...this.entities]}remove(t){if(nt(t))this.entities=this.entities.filter(e=>!t(e));else{const e=Object(rt.a)(t);this.entities=this.entities.filter(t=>-1===e.indexOf(t[this.idKey]))}return this.entities}move(t,e){const n=this.entities.findIndex(e=>e[this.idKey]===t);let i=0;const o=[...this.entities];if(!t||n<0)return[...this.entities];if(e&&(function(t){return void 0===t}(s=e.afterId)||function(t){return null===t}(s)?e.toIndex&&(i=e.toIndex):i=this.entities.findIndex(t=>t[this.idKey]===e.afterId)),i=Math.max(0,Math.min(this.entities.length-1,i)),i===n)return[...this.entities];var s;{const t=this.entities[n],e=i<n?-1:1;for(let s=n;s!==i;s+=e)o[s]=o[s+e];return o[i]=t,[...o]}}}function at(t,e){return new ct(t,e)}class lt extends it{constructor(t={entities:[]},e={idKey:"_id"}){if(super(t),this.entities$=this.select(t=>t.entities),this.entitiesWithRefs$=this.entities$.pipe(Object(b.a)(t=>t?t.map(t=>{const e=Object.assign({},t);if(!this.onCombineRefs)throw new Error("onCombineRefs is not empty");return e.refs||(e.refs={}),this.onCombineRefs(e,this.internalReferencesIdMap,this.snapshot.references),e}):t)),this.trackBy=(t,e)=>e[this.options.idKey],this.options=Object.assign({idKey:"_id"},e),!this.options.idKey)throw new Error("idKey is required in EntityStore");this.buildReferencesIdMap()}get entities(){return this.snapshot.entities}resetPagination(t,e){t.count=e;const n=Math.ceil(t.count/t.pageSize);t.pageCount=n,this.snapshot.pagination=Object.assign({},t)}increasePagination(t){const e=this.snapshot.pagination;this.resetPagination(e,e.count+t)}decreasePagination(t){const e=this.snapshot.pagination;e&&this.resetPagination(e,e.count-t)}buildReferencesIdMap(){this.snapshot.references&&(this.internalReferencesIdMap=function(t,e){const n={};for(const i in t)if(t.hasOwnProperty(i)){const o=ot(i,e),s=t[i];if(s instanceof Array){const t=J(s,o);n[i]=t}}return n}(this.snapshot.references,this.options.referencesIdKeys))}initialize(t,e){const n=this.snapshot;n.entities=t||[],n.pagination=e,this.next(n)}initializeWithReferences(t,e,n){const i=this.snapshot;i.entities=t||[],i.pagination=n,i.references=e,this.buildReferencesIdMap(),this.next(i)}addInternal(t,e,n){const i=G(t);if(0===i.length)return;const o=this.snapshot;o.entities=at(o.entities).add(i,n),o.references&&(st(o.references,e,this.options.referencesIdKeys),this.buildReferencesIdMap()),o.pagination&&(this.increasePagination(i.length),n&&!n.prepend&&n.autoGotoLastPage&&(o.pagination.pageIndex=o.pagination.pageCount)),this.next(o)}add(t,e){this.addInternal(t,void 0,e)}addWithReferences(t,e,n){this.addInternal(t,e,n)}updateInternal(t,e,n){const i=G(t),o=this.snapshot;for(let s=0;s<o.entities.length;s++){const t=o.entities[s];if(i.includes(t[this.options.idKey])){const n=nt(e)?e(t):e;o.entities[s]=Object.assign(Object.assign({},t),n)}}o.entities=[...o.entities],o.references&&(st(o.references,n,this.options.referencesIdKeys),this.buildReferencesIdMap()),this.next(o)}update(t,e){this.updateInternal(t,e,void 0)}updateWithReferences(t,e,n){this.updateInternal(t,e,n)}remove(t){const e=this.snapshot,n=e.entities.length;e.entities=at(e.entities,this.options).remove(t),this.decreasePagination(n-e.entities.length),this.next(e)}clearPagination(){const t=this.snapshot;t.pagination=null,this.next(t)}clear(){const t=this.snapshot;t.entities=[],t.pagination=null,t.references=null,this.next(t)}}let dt=(()=>{class t extends it{constructor(){super({count:0})}static countSelector(t){return t.count}increase(){return Object(v.a)(!0).pipe(Object(K.a)(()=>{this.setState({count:this.snapshot.count+1})}))}decrease(){return Object(v.a)(!0).pipe(Object(K.a)(()=>{this.setState(t=>({count:t.count-1}))}))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac}),i([et()],t.prototype,"increase",null),i([et()],t.prototype,"decrease",null),t})();var ht=n("2kYt");let ut,pt=(()=>{class t{constructor(t){this.counterStore=t,this.count$=this.counterStore.select(dt.countSelector)}ngOnInit(){}increase(){this.counterStore.increase()}decrease(){this.counterStore.decrease()}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(dt))},t.\u0275cmp=o.Hb({type:t,selectors:[["thy-store-counter-example"]],decls:7,vars:3,consts:[[1,"dg-btn","dg-btn-primary","dg-btn-sm",3,"click"]],template:function(t,e){1&t&&(o.Tb(0,"div"),o.zc(1),o.fc(2,"async"),o.Sb(),o.Tb(3,"button",0),o.bc("click",function(){return e.increase()}),o.zc(4,"+"),o.Sb(),o.Tb(5,"button",0),o.bc("click",function(){return e.decrease()}),o.zc(6,"-"),o.Sb()),2&t&&(o.Bb(1),o.Bc("Count: ",o.gc(2,1,e.count$),""))},pipes:[ht.b],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:10px}"]}),t})(),gt=(()=>{class t extends lt{constructor(t){super({entities:[]},{idKey:"id"}),this.todosApiService=t}static todosSelector(t){return t.entities}getWithCompleted(t){return this.entities.filter(e=>e.completed===t)}getCompleted(){return this.getWithCompleted(!0)}allCompleted(){return this.entities.length===this.getCompleted().length}getRemaining(){return this.getWithCompleted(!1)}fetchTodos(){return this.todosApiService.fetchTodos().pipe(Object(K.a)(t=>{ut=t.length,this.initialize(t,{pageIndex:1,pageCount:2,pageSize:20})}))}addTodo(t){return Object(v.a)(!0).pipe(Object(K.a)(()=>{this.add({id:++ut,title:t,completed:!1})}))}updateTodo(t,e){if(0===e.length)return this.remove(t.id);this.update(t.id,{editing:!1,title:e})}toggleCompletion(t){this.update(t.id,{completed:!t.completed})}removeCompleted(){const t=this.getCompleted();this.remove(t.map(t=>t.id))}removeTodo(t){this.remove(t.id)}setAllTo(t){this.update(this.entities.map(t=>t.id),{completed:t})}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(ft))},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),i([et()],t.prototype,"fetchTodos",null),i([et()],t.prototype,"addTodo",null),i([et()],t.prototype,"updateTodo",null),i([et()],t.prototype,"toggleCompletion",null),i([et()],t.prototype,"removeCompleted",null),i([et()],t.prototype,"removeTodo",null),i([et()],t.prototype,"setAllTo",null),t})(),ft=(()=>{class t{fetchTodos(){return Object(v.a)([{id:1,title:"Todo1",completed:!1}])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var bt=n("nIj0");function mt(t,e){if(1&t){const t=o.Ub();o.Tb(0,"input",10,11),o.bc("click",function(){o.sc(t);const e=o.rc(1);return o.ec(3).todosStore.setAllTo(e.checked)}),o.Sb()}if(2&t){const t=o.ec(3);o.lc("checked",t.todosStore.allCompleted())}}function _t(t,e){if(1&t){const t=o.Ub();o.Tb(0,"input",17,18),o.bc("blur",function(){o.sc(t);const e=o.rc(1),n=o.ec().$implicit;return o.ec(3).stopEditing(n,e.value)})("keyup.enter",function(){o.sc(t);const e=o.rc(1),n=o.ec().$implicit;return o.ec(3).update(n,e.value)})("keyup.escape",function(){o.sc(t);const e=o.ec().$implicit;return o.ec(3).cancelEditingTodo(e)}),o.Sb()}if(2&t){const t=o.ec().$implicit;o.lc("value",t.title)}}function xt(t,e){if(1&t){const t=o.Ub();o.Tb(0,"li"),o.Tb(1,"div",12),o.Tb(2,"input",13),o.bc("click",function(){o.sc(t);const n=e.$implicit;return o.ec(3).toggleCompletion(n)}),o.Sb(),o.Tb(3,"label",14),o.bc("dblclick",function(){o.sc(t);const n=e.$implicit;return o.ec(3).editTodo(n)}),o.zc(4),o.Sb(),o.Tb(5,"button",15),o.bc("click",function(){o.sc(t);const n=e.$implicit;return o.ec(3).remove(n)}),o.Sb(),o.Sb(),o.xc(6,_t,2,1,"input",16),o.Sb()}if(2&t){const t=e.$implicit;o.Fb("completed",t.completed)("editing",t.editing),o.Bb(2),o.lc("checked",t.completed),o.Bb(2),o.Ac(t.title),o.Bb(2),o.lc("ngIf",t.editing)}}function Ot(t,e){if(1&t&&(o.Tb(0,"section",6),o.xc(1,mt,2,1,"input",7),o.Tb(2,"ul",8),o.xc(3,xt,7,7,"li",9),o.Sb(),o.Sb()),2&t){const t=o.ec().ngIf,e=o.ec();o.Bb(1),o.lc("ngIf",t.length),o.Bb(2),o.lc("ngForOf",t)("ngForTrackBy",e.todosStore.trackByFn)}}function Ct(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",22),o.bc("click",function(){return o.sc(t),o.ec(3).removeCompleted()}),o.zc(1,"Clear completed"),o.Sb()}}function yt(t,e){if(1&t&&(o.Tb(0,"footer",19),o.Tb(1,"span",20),o.Tb(2,"strong"),o.zc(3),o.Sb(),o.zc(4),o.Sb(),o.xc(5,Ct,2,0,"button",21),o.Sb()),2&t){const t=o.ec(2);o.Bb(3),o.Ac(t.todosStore.getRemaining().length),o.Bb(1),o.Bc(" ",1==t.todosStore.getRemaining().length?"item":"items"," left"),o.Bb(1),o.lc("ngIf",t.todosStore.getCompleted().length>0)}}function wt(t,e){if(1&t){const t=o.Ub();o.Tb(0,"section",1),o.Tb(1,"header",2),o.Tb(2,"h1"),o.zc(3,"todos"),o.Sb(),o.Tb(4,"input",3),o.bc("ngModelChange",function(e){return o.sc(t),o.ec().newTodoText=e})("keyup.enter",function(){return o.sc(t),o.ec().addTodo()}),o.Sb(),o.Sb(),o.xc(5,Ot,4,3,"section",4),o.xc(6,yt,6,3,"footer",5),o.Sb()}if(2&t){const t=e.ngIf,n=o.ec();o.Bb(4),o.lc("ngModel",n.newTodoText),o.Bb(1),o.lc("ngIf",t&&t.length>0),o.Bb(1),o.lc("ngIf",t.length>0)}}let Mt,Pt=(()=>{class t{constructor(t){this.todosStore=t,this.todos$=this.todosStore.select(gt.todosSelector)}ngOnInit(){this.todosStore.fetchTodos()}addTodo(){this.todosStore.addTodo(this.newTodoText).subscribe(()=>{this.newTodoText=""})}toggleCompletion(t){this.todosStore.toggleCompletion(t)}editTodo(t){t.editing=!0}remove(t){this.todosStore.removeTodo(t)}update(t,e){this.todosStore.updateTodo(t,e)}stopEditing(t,e){t.title=e,t.editing=!1}cancelEditing(t){t.editing=!1}removeCompleted(){this.todosStore.removeCompleted()}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(gt))},t.\u0275cmp=o.Hb({type:t,selectors:[["thy-store-todos-example"]],decls:2,vars:3,consts:[["class","todoapp",4,"ngIf"],[1,"todoapp"],[1,"header"],["placeholder","What needs to be done?","autofocus","",1,"new-todo",3,"ngModel","ngModelChange","keyup.enter"],["class","main",4,"ngIf"],["class","footer",4,"ngIf"],[1,"main"],["id","toggle-all","class","toggle-all","type","checkbox",3,"checked","click",4,"ngIf"],[1,"todo-list"],[3,"completed","editing",4,"ngFor","ngForOf","ngForTrackBy"],["id","toggle-all","type","checkbox",1,"toggle-all",3,"checked","click"],["toggleAll",""],[1,"view"],["type","checkbox",1,"toggle",3,"checked","click"],[3,"dblclick"],[1,"destroy",3,"click"],["class","edit",3,"value","blur","keyup.enter","keyup.escape",4,"ngIf"],[1,"edit",3,"value","blur","keyup.enter","keyup.escape"],["editor",""],[1,"footer"],[1,"todo-count"],["class","clear-completed",3,"click",4,"ngIf"],[1,"clear-completed",3,"click"]],template:function(t,e){1&t&&(o.xc(0,wt,7,3,"section",0),o.fc(1,"async")),2&t&&o.lc("ngIf",o.gc(1,1,e.todos$))},directives:[ht.m,bt.a,bt.c,bt.d,ht.l],pipes:[ht.b],styles:['@charset "UTF-8";button[_ngcontent-%COMP%]{margin:0;padding:0;border:0;background:none;font-size:100%;vertical-align:baseline;font-family:inherit;font-weight:inherit;color:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.hidden[_ngcontent-%COMP%]{display:none}.todoapp[_ngcontent-%COMP%]{background:#fff;margin:130px 0 40px;position:relative;box-shadow:0 2px 4px 0 rgba(0,0,0,.2),0 25px 50px 0 rgba(0,0,0,.1)}.todoapp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-style:italic;font-weight:400;color:rgba(0,0,0,.4)}.todoapp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{font-style:italic;font-weight:400;color:rgba(0,0,0,.4)}.todoapp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::input-placeholder{font-style:italic;font-weight:400;color:rgba(0,0,0,.4)}.todoapp[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{position:absolute;top:-140px;width:100%;font-size:80px;font-weight:200;text-align:center;color:#b83f45;-webkit-text-rendering:optimizeLegibility;-moz-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility}.edit[_ngcontent-%COMP%], .new-todo[_ngcontent-%COMP%]{position:relative;margin:0;width:100%;font-size:24px;font-family:inherit;font-weight:inherit;line-height:1.4em;color:inherit;padding:6px;border:1px solid #999;box-shadow:inset 0 -1px 5px 0 rgba(0,0,0,.2);box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.new-todo[_ngcontent-%COMP%]{padding:16px 16px 16px 60px;height:65px;border:none;background:rgba(0,0,0,.003);box-shadow:inset 0 -2px 1px rgba(0,0,0,.03)}.main[_ngcontent-%COMP%]{position:relative;z-index:2;border-top:1px solid #e6e6e6}.toggle-all[_ngcontent-%COMP%]{width:1px;height:1px;border:none;opacity:0;position:absolute;right:100%;bottom:100%}.toggle-all[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:45px;height:65px;font-size:0;position:absolute;top:-65px;left:0}.toggle-all[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{content:"\u276f";display:inline-block;font-size:22px;color:#949494;padding:10px 27px;transform:rotate(90deg)}.toggle-all[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{color:#484848}.todo-list[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;font-size:24px;border-bottom:1px solid #ededed}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.todo-list[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]{border-bottom:none;padding:0}.todo-list[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{display:block;width:calc(100% - 43px);padding:12px 16px;margin:0 0 0 43px}.todo-list[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .view[_ngcontent-%COMP%]{display:none}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{text-align:center;width:40px;height:auto;position:absolute;top:0;bottom:0;margin:auto 0;border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:0}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23949494%22%20stroke-width%3D%223%22/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:0}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%2359A193%22%20stroke-width%3D%223%22%2F%3E%3Cpath%20fill%3D%22%233EA390%22%20d%3D%22M72%2025L42%2071%2027%2056l-4%204%2020%2020%2034-52z%22%2F%3E%3C%2Fsvg%3E")}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{word-break:break-all;padding:15px 15px 15px 60px;display:block;line-height:1.2;transition:color .4s;font-weight:400;color:#484848}.todo-list[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#949494;text-decoration:line-through}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .destroy[_ngcontent-%COMP%]{display:none;position:absolute;top:0;right:10px;bottom:0;width:40px;height:40px;margin:auto 0;font-size:30px;color:#949494;transition:color .2s ease-out}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .destroy[_ngcontent-%COMP%]:focus, .todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .destroy[_ngcontent-%COMP%]:hover{color:#c18585}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .destroy[_ngcontent-%COMP%]:after{content:"\xd7";display:block;height:100%;line-height:1.1}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .destroy[_ngcontent-%COMP%]{display:block}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{display:none}.todo-list[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]:last-child{margin-bottom:-1px}.footer[_ngcontent-%COMP%]{padding:10px 15px;height:20px;text-align:center;font-size:15px;border-top:1px solid #e6e6e6}.footer[_ngcontent-%COMP%]:before{content:"";position:absolute;right:0;bottom:0;left:0;height:50px;overflow:hidden;box-shadow:0 1px 1px rgba(0,0,0,.2),0 8px 0 -3px #f6f6f6,0 9px 1px -3px rgba(0,0,0,.2),0 16px 0 -6px #f6f6f6,0 17px 2px -6px rgba(0,0,0,.2)}.todo-count[_ngcontent-%COMP%]{float:left;text-align:left}.todo-count[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:300}.filters[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;position:absolute;right:0;left:0}.filters[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline}.filters[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;margin:3px;padding:3px 7px;text-decoration:none;border:1px solid transparent;border-radius:3px}.filters[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{border-color:#db7676}.filters[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.selected[_ngcontent-%COMP%]{border-color:#ce4646}.clear-completed[_ngcontent-%COMP%], html[_ngcontent-%COMP%]   .clear-completed[_ngcontent-%COMP%]:active{float:right;position:relative;line-height:19px;text-decoration:none;cursor:pointer}.clear-completed[_ngcontent-%COMP%]:hover{text-decoration:underline}.info[_ngcontent-%COMP%]{margin:65px auto 0;color:#4d4d4d;font-size:11px;text-shadow:0 1px 0 hsla(0,0%,100%,.5);text-align:center}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1}.info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;text-decoration:none;font-weight:400}.info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media screen and (-webkit-min-device-pixel-ratio:0){.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%], .toggle-all[_ngcontent-%COMP%]{background:none}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{height:40px}}@media (max-width:430px){.footer[_ngcontent-%COMP%]{height:50px}.filters[_ngcontent-%COMP%]{bottom:10px}}.toggle-all[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .toggle[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], [_ngcontent-%COMP%]:focus{box-shadow:0 0 2px 2px #cf7d7d;outline:0}']}),t})(),vt=(()=>{class t extends lt{constructor(){super({entities:[]},{})}onCombineRefs(t,e,n){t.refs.assignee=e.users[t.assignee],t.refs.created_by=e.users[t.created_by]}fetchTasks(){return Object(v.a)({tasks:[{_id:"task1",title:"Task 1",assignee:"user1",created_by:"user1"}],references:{users:[{_id:"user1",name:"why520crazy"},{_id:"user2",name:"peter"}]}}).pipe(Object(K.a)(t=>{this.initializeWithReferences(t.tasks,t.references)}))}addTask(t){this.addWithReferences({_id:"task"+ ++Mt,title:t,created_by:"user3",assignee:"user3"},{users:[{_id:"user3",name:"Terry"}]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),i([et()],t.prototype,"fetchTasks",null),i([et()],t.prototype,"addTask",null),t})();function St(t,e){if(1&t&&(o.Tb(0,"div"),o.zc(1),o.Sb()),2&t){const t=e.$implicit;o.Bb(1),o.Cc("",t.title," - ",null==t.refs.assignee?null:t.refs.assignee.name,"")}}function Tt(t,e){if(1&t&&(o.Tb(0,"div"),o.xc(1,St,2,2,"div",3),o.Sb()),2&t){const t=e.ngIf,n=o.ec();o.Bb(1),o.lc("ngForOf",t)("ngForTrackBy",n.tasksStore.trackBy)}}const kt={"thy-store-counter-example":pt,"thy-store-todos-example":Pt,"thy-store-tasks-example":(()=>{class t{constructor(t){this.tasksStore=t}ngOnInit(){this.tasksStore.fetchTasks()}addTask(){this.tasksStore.addTask(this.newTaskTitle),this.newTaskTitle=""}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(vt))},t.\u0275cmp=o.Hb({type:t,selectors:[["thy-store-tasks-example"]],decls:6,vars:4,consts:[[1,"header"],["placeholder","Add new task?","autofocus","",1,"new-task",3,"ngModel","ngModelChange","keyup.enter"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(t,e){1&t&&(o.Tb(0,"header",0),o.Tb(1,"h1"),o.zc(2,"Tasks"),o.Sb(),o.Tb(3,"input",1),o.bc("ngModelChange",function(t){return e.newTaskTitle=t})("keyup.enter",function(){return e.addTask()}),o.Sb(),o.Sb(),o.xc(4,Tt,2,2,"div",2),o.fc(5,"async")),2&t&&(o.Bb(3),o.lc("ngModel",e.newTaskTitle),o.Bb(1),o.lc("ngIf",o.gc(5,2,e.tasksStore.entitiesWithRefs$)))},directives:[bt.a,bt.c,bt.d,ht.m,ht.l],pipes:[ht.b],styles:[""]}),t})()},It=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Lb({type:t}),t.\u0275inj=o.Kb({providers:[],imports:[[ht.c,bt.b,u.forRoot([dt])]]}),t})()}}]);