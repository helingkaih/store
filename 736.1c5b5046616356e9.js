"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[736],{5736:(rt,y,p)=>{p.r(y),p.d(y,{EXAMPLES_MODULE:()=>it,EXAMPLE_COMPONENTS:()=>nt});var g=p(5163),c=p(5024),C=p(8643),x=p(9825),t=p(8578);class u extends c.yh{constructor(){super({count:0})}static countSelector(n){return n.count}increase(){return(0,C.of)(!0).pipe((0,x.b)(()=>{this.setState({count:this.snapshot.count+1})}))}decrease(){return(0,C.of)(!0).pipe((0,x.b)(()=>{this.setState(n=>({count:n.count-1}))}))}}u.\u0275fac=function(n){return new(n||u)},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac}),(0,g.gn)([(0,c.aU)()],u.prototype,"increase",null),(0,g.gn)([(0,c.aU)()],u.prototype,"decrease",null);var a=p(2031);let T,S=(()=>{class o{constructor(e){this.counterStore=e,this.count$=this.counterStore.select(u.countSelector)}ngOnInit(){}increase(){this.counterStore.increase()}decrease(){this.counterStore.decrease()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u))},o.\u0275cmp=t.Xpm({type:o,selectors:[["thy-store-counter-example"]],decls:7,vars:3,consts:[[1,"dg-btn","dg-btn-primary","dg-btn-sm",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"button",0),t.NdJ("click",function(){return i.increase()}),t._uU(4,"+"),t.qZA(),t.TgZ(5,"button",0),t.NdJ("click",function(){return i.decrease()}),t._uU(6,"-"),t.qZA()),2&e&&(t.xp6(1),t.hij("Count: ",t.lcZ(2,1,i.count$),""))},dependencies:[a.Ov],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:10px}"]}),o})();class m extends c.cf{constructor(n,e){super({entities:[],someKey:"1"},{idKey:"id"}),this.todosApiService=n,this.storeFactory=e,this.stores=[],this.stores=this.storeFactory.getStores(["ItemsStore","AnotherItemsStore"])}static todosSelector(n){return n.entities}getWithCompleted(n){return this.entities.filter(e=>e.completed===n)}getCompleted(){return this.getWithCompleted(!0)}allCompleted(){return this.entities.length===this.getCompleted().length}getRemaining(){return this.getWithCompleted(!1)}fetchTodos(){return this.todosApiService.fetchTodos().pipe((0,x.b)(n=>{T=n.length,this.initialize(n,{pageIndex:1,pageCount:2,pageSize:20})}))}addTodo(n){return(0,C.of)(!0).pipe((0,x.b)(()=>{this.add({id:++T,title:n,completed:!1})}))}updateTodo(n,e){if(0===e.length)return this.remove(n.id);this.update(n.id,{editing:!1,title:e})}toggleCompletion(n){this.update(n.id,{completed:!n.completed})}removeCompleted(){const n=this.getCompleted();this.remove(n.map(e=>e.id))}removeTodo(n){this.remove(n.id)}setAllTo(n){this.update(this.entities.map(e=>e.id),{completed:n})}}m.\u0275fac=function(n){return new(n||m)(t.LFG(b),t.LFG(c.Cn))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),(0,g.gn)([(0,c.aU)()],m.prototype,"fetchTodos",null),(0,g.gn)([(0,c.aU)()],m.prototype,"addTodo",null),(0,g.gn)([(0,c.aU)()],m.prototype,"updateTodo",null),(0,g.gn)([(0,c.aU)()],m.prototype,"toggleCompletion",null),(0,g.gn)([(0,c.aU)()],m.prototype,"removeCompleted",null),(0,g.gn)([(0,c.aU)()],m.prototype,"removeTodo",null),(0,g.gn)([(0,c.aU)()],m.prototype,"setAllTo",null);let b=(()=>{class o{fetchTodos(){return(0,C.of)([{id:1,title:"Todo1",completed:!1}])}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var l=p(2429);function P(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"input",10,11),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(1),s=t.oxw(3);return t.KtG(s.todosStore.setAllTo(r.checked))}),t.qZA()}if(2&o){const e=t.oxw(3);t.Q6J("checked",e.todosStore.allCompleted())}}function k(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"input",17,18),t.NdJ("blur",function(){t.CHM(e);const r=t.MAs(1),s=t.oxw().$implicit,d=t.oxw(3);return t.KtG(d.stopEditing(s,r.value))})("keyup.enter",function(){t.CHM(e);const r=t.MAs(1),s=t.oxw().$implicit,d=t.oxw(3);return t.KtG(d.update(s,r.value))})("keyup.escape",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.cancelEditingTodo(r))}),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.Q6J("value",e.title)}}function w(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"div",12)(2,"input",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw(3);return t.KtG(d.toggleCompletion(s))}),t.qZA(),t.TgZ(3,"label",14),t.NdJ("dblclick",function(){const s=t.CHM(e).$implicit,d=t.oxw(3);return t.KtG(d.editTodo(s))}),t._uU(4),t.qZA(),t.TgZ(5,"button",15),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw(3);return t.KtG(d.remove(s))}),t.qZA()(),t.YNc(6,k,2,1,"input",16),t.qZA()}if(2&o){const e=n.$implicit;t.ekj("completed",e.completed)("editing",e.editing),t.xp6(2),t.Q6J("checked",e.completed),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Q6J("ngIf",e.editing)}}function I(o,n){if(1&o&&(t.TgZ(0,"section",6),t.YNc(1,P,2,1,"input",7),t.TgZ(2,"ul",8),t.YNc(3,w,7,7,"li",9),t.qZA()()),2&o){const e=t.oxw().ngIf,i=t.oxw();t.xp6(1),t.Q6J("ngIf",e.length),t.xp6(2),t.Q6J("ngForOf",e)("ngForTrackBy",i.todosStore.trackByFn)}}function E(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.removeCompleted())}),t._uU(1,"Clear completed"),t.qZA()}}function A(o,n){if(1&o&&(t.TgZ(0,"footer",19)(1,"span",20)(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.qZA(),t.YNc(5,E,2,0,"button",21),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.todosStore.getRemaining().length),t.xp6(1),t.hij(" ",1===e.todosStore.getRemaining().length?"item":"items"," left"),t.xp6(1),t.Q6J("ngIf",e.todosStore.getCompleted().length>0)}}function F(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"section",1)(1,"header",2)(2,"h1"),t._uU(3,"todos"),t.qZA(),t.TgZ(4,"input",3),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.newTodoText=r)})("keyup.enter",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.addTodo())}),t.qZA()(),t.YNc(5,I,4,3,"section",4),t.YNc(6,A,6,3,"footer",5),t.qZA()}if(2&o){const e=n.ngIf,i=t.oxw();t.xp6(4),t.Q6J("ngModel",i.newTodoText),t.xp6(1),t.Q6J("ngIf",e&&e.length>0),t.xp6(1),t.Q6J("ngIf",e.length>0)}}let U,Z=(()=>{class o{constructor(e){this.todosStore=e,this.todos$=this.todosStore.select(m.todosSelector)}ngOnInit(){this.todosStore.fetchTodos().subscribe()}addTodo(){this.todosStore.addTodo(this.newTodoText).subscribe(()=>{this.newTodoText=""})}toggleCompletion(e){this.todosStore.toggleCompletion(e)}editTodo(e){e.editing=!0}remove(e){this.todosStore.removeTodo(e)}update(e,i){this.todosStore.updateTodo(e,i)}stopEditing(e,i){e.title=i,e.editing=!1}cancelEditing(e){e.editing=!1}removeCompleted(){this.todosStore.removeCompleted()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m))},o.\u0275cmp=t.Xpm({type:o,selectors:[["thy-store-todos-example"]],decls:2,vars:3,consts:[["class","todoapp",4,"ngIf"],[1,"todoapp"],[1,"header"],["placeholder","What needs to be done?","autofocus","",1,"new-todo",3,"ngModel","ngModelChange","keyup.enter"],["class","main",4,"ngIf"],["class","footer",4,"ngIf"],[1,"main"],["id","toggle-all","class","toggle-all","type","checkbox",3,"checked","click",4,"ngIf"],[1,"todo-list"],[3,"completed","editing",4,"ngFor","ngForOf","ngForTrackBy"],["id","toggle-all","type","checkbox",1,"toggle-all",3,"checked","click"],["toggleAll",""],[1,"view"],["type","checkbox",1,"toggle",3,"checked","click"],[3,"dblclick"],[1,"destroy",3,"click"],["class","edit",3,"value","blur","keyup.enter","keyup.escape",4,"ngIf"],[1,"edit",3,"value","blur","keyup.enter","keyup.escape"],["editor",""],[1,"footer"],[1,"todo-count"],["class","clear-completed",3,"click",4,"ngIf"],[1,"clear-completed",3,"click"]],template:function(e,i){1&e&&(t.YNc(0,F,7,3,"section",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.todos$))},dependencies:[a.sg,a.O5,l.Fj,l.JJ,l.On,a.Ov],styles:['@charset "UTF-8";button[_ngcontent-%COMP%]{margin:0;padding:0;border:0;background:none;font-size:100%;vertical-align:baseline;font-family:inherit;font-weight:inherit;color:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.hidden[_ngcontent-%COMP%]{display:none}.todoapp[_ngcontent-%COMP%]{background:#fff;margin:130px 0 40px;position:relative;box-shadow:0 2px 4px #0003,0 25px 50px #0000001a}.todoapp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-style:italic;font-weight:400;color:#0006}.todoapp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{font-style:italic;font-weight:400;color:#0006}.todoapp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::input-placeholder{font-style:italic;font-weight:400;color:#0006}.todoapp[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{position:absolute;top:-140px;width:100%;font-size:80px;font-weight:200;text-align:center;color:#b83f45;-webkit-text-rendering:optimizeLegibility;-moz-text-rendering:optimizeLegibility;text-rendering:optimizeLegibility}.new-todo[_ngcontent-%COMP%], .edit[_ngcontent-%COMP%]{position:relative;margin:0;width:100%;font-size:24px;font-family:inherit;font-weight:inherit;line-height:1.4em;color:inherit;padding:6px;border:1px solid #999;box-shadow:inset 0 -1px 5px #0003;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.new-todo[_ngcontent-%COMP%]{padding:16px 16px 16px 60px;height:65px;border:none;background:rgba(0,0,0,.003);box-shadow:inset 0 -2px 1px #00000008}.main[_ngcontent-%COMP%]{position:relative;z-index:2;border-top:1px solid #e6e6e6}.toggle-all[_ngcontent-%COMP%]{width:1px;height:1px;border:none;opacity:0;position:absolute;right:100%;bottom:100%}.toggle-all[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:45px;height:65px;font-size:0;position:absolute;top:-65px;left:0}.toggle-all[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{content:"\\276f";display:inline-block;font-size:22px;color:#949494;padding:10px 27px;transform:rotate(90deg)}.toggle-all[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{color:#484848}.todo-list[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;font-size:24px;border-bottom:1px solid #ededed}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.todo-list[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]{border-bottom:none;padding:0}.todo-list[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{display:block;width:calc(100% - 43px);padding:12px 16px;margin:0 0 0 43px}.todo-list[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .view[_ngcontent-%COMP%]{display:none}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{text-align:center;width:40px;height:auto;position:absolute;top:0;bottom:0;margin:auto 0;border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{opacity:0}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23949494%22%20stroke-width%3D%223%22/%3E%3C/svg%3E);background-repeat:no-repeat;background-position:center left}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%2359A193%22%20stroke-width%3D%223%22%2F%3E%3Cpath%20fill%3D%22%233EA390%22%20d%3D%22M72%2025L42%2071%2027%2056l-4%204%2020%2020%2034-52z%22%2F%3E%3C%2Fsvg%3E)}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{word-break:break-all;padding:15px 15px 15px 60px;display:block;line-height:1.2;transition:color .4s;font-weight:400;color:#484848}.todo-list[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#949494;text-decoration:line-through}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .destroy[_ngcontent-%COMP%]{display:none;position:absolute;top:0;right:10px;bottom:0;width:40px;height:40px;margin:auto 0;font-size:30px;color:#949494;transition:color .2s ease-out}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .destroy[_ngcontent-%COMP%]:hover, .todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .destroy[_ngcontent-%COMP%]:focus{color:#c18585}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .destroy[_ngcontent-%COMP%]:after{content:"\\d7";display:block;height:100%;line-height:1.1}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .destroy[_ngcontent-%COMP%]{display:block}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{display:none}.todo-list[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]:last-child{margin-bottom:-1px}.footer[_ngcontent-%COMP%]{padding:10px 15px;height:20px;text-align:center;font-size:15px;border-top:1px solid #e6e6e6}.footer[_ngcontent-%COMP%]:before{content:"";position:absolute;right:0;bottom:0;left:0;height:50px;overflow:hidden;box-shadow:0 1px 1px #0003,0 8px 0 -3px #f6f6f6,0 9px 1px -3px #0003,0 16px 0 -6px #f6f6f6,0 17px 2px -6px #0003}.todo-count[_ngcontent-%COMP%]{float:left;text-align:left}.todo-count[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:300}.filters[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;position:absolute;right:0;left:0}.filters[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline}.filters[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;margin:3px;padding:3px 7px;text-decoration:none;border:1px solid transparent;border-radius:3px}.filters[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{border-color:#db7676}.filters[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.selected[_ngcontent-%COMP%]{border-color:#ce4646}.clear-completed[_ngcontent-%COMP%], html[_ngcontent-%COMP%]   .clear-completed[_ngcontent-%COMP%]:active{float:right;position:relative;line-height:19px;text-decoration:none;cursor:pointer}.clear-completed[_ngcontent-%COMP%]:hover{text-decoration:underline}.info[_ngcontent-%COMP%]{margin:65px auto 0;color:#4d4d4d;font-size:11px;text-shadow:0 1px 0 rgba(255,255,255,.5);text-align:center}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1}.info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;text-decoration:none;font-weight:400}.info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media screen and (-webkit-min-device-pixel-ratio: 0){.toggle-all[_ngcontent-%COMP%], .todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{background:none}.todo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{height:40px}}@media (max-width: 430px){.footer[_ngcontent-%COMP%]{height:50px}.filters[_ngcontent-%COMP%]{bottom:10px}}[_ngcontent-%COMP%]:focus, .toggle[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .toggle-all[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{box-shadow:0 0 2px 2px #cf7d7d;outline:0}']}),o})();class f extends c.cf{constructor(){super({entities:[],references:{users:[]}},{})}onCombineRefs(n,e,i){n.refs.assignee=e.users[n.assignee],n.refs.created_by=e.users[n.created_by]}fetchTasks(){return(0,C.of)({tasks:[{_id:"task1",title:"Task 1",assignee:"user1",created_by:"user1"}],references:{users:[{_id:"user1",name:"why520crazy"},{_id:"user2",name:"peter"}]}}).pipe((0,x.b)(e=>{this.initializeWithReferences(e.tasks,e.references)}))}addTask(n){this.addWithReferences({_id:"task"+ ++U,title:n,created_by:"user3",assignee:"user3"},{users:[{_id:"user3",name:"Terry"}]})}}function J(o,n){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.AsE("",e.title," - ",null==e.refs.assignee?null:e.refs.assignee.name,"")}}function z(o,n){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,J,2,2,"div",3),t.qZA()),2&o){const e=n.ngIf,i=t.oxw();t.xp6(1),t.Q6J("ngForOf",e)("ngForTrackBy",i.tasksStore.trackBy)}}f.\u0275fac=function(n){return new(n||f)},f.\u0275prov=t.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),(0,g.gn)([(0,c.aU)()],f.prototype,"fetchTasks",null),(0,g.gn)([(0,c.aU)()],f.prototype,"addTask",null);let N=(()=>{class o{constructor(e){this.tasksStore=e}ngOnInit(){this.tasksStore.fetchTasks()}addTask(){this.tasksStore.addTask(this.newTaskTitle),this.newTaskTitle=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["thy-store-tasks-example"]],decls:6,vars:4,consts:[[1,"header"],["placeholder","Add new task?","autofocus","",1,"new-task",3,"ngModel","ngModelChange","keyup.enter"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(e,i){1&e&&(t.TgZ(0,"header",0)(1,"h1"),t._uU(2,"Tasks"),t.qZA(),t.TgZ(3,"input",1),t.NdJ("ngModelChange",function(s){return i.newTaskTitle=s})("keyup.enter",function(){return i.addTask()}),t.qZA()(),t.YNc(4,z,2,2,"div",2),t.ALo(5,"async")),2&e&&(t.xp6(3),t.Q6J("ngModel",i.newTaskTitle),t.xp6(1),t.Q6J("ngIf",t.lcZ(5,2,i.tasksStore.entitiesWithRefs$)))},dependencies:[a.sg,a.O5,l.Fj,l.JJ,l.On,a.Ov]}),o})();var $=p(996);class _ extends c.yh{constructor(n){super({items:[]}),this.http=n}fetchItems(){return this.http.get("https://62f70d4273b79d015352b5e5.mockapi.io/items").pipe((0,x.b)(n=>{this.setState({items:n})}))}hello(){throw new Error("xx")}}_.\u0275fac=function(n){return new(n||_)(t.LFG($.eN))},_.\u0275prov=t.Yz7({token:_,factory:_.\u0275fac}),(0,g.gn)([(0,c.aU)({cancelUncompleted:"self"})],_.prototype,"fetchItems",null),(0,g.gn)([(0,c.aU)()],_.prototype,"hello",null);var D=p(7630),v=p(559);function Y(o,n){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function L(o,n){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Y,2,1,"div",4),t.ALo(2,"async"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.todos$))}}function q(o,n){1&o&&(t.TgZ(0,"div"),t._uU(1,"Loading..."),t.qZA())}function G(o,n){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e," ")}}let j=(()=>{class o{constructor(e){this.todosStore=e,this.destroy$=new v.xQ,this.loadingDone=!1,this.messages=[],this.todos$=this.todosStore.select(i=>i.items)}ngOnInit(){this.fetchItems()}fetchItems(){this.loadingDone=!1,this.todosStore.fetchItems().pipe((0,D.x)(()=>{this.loadingDone=!0})).subscribe({next:e=>{console.log("next",e),this.messages.push(`Items fetched ${new Date}`)},error:e=>{console.log(e)},complete:()=>{console.log("complete!")}})}cancel(){this.todosStore.cancelUncompleted()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_))},o.\u0275cmp=t.Xpm({type:o,selectors:[["thy-store-cancellation-example"]],features:[t._Bn([_])],decls:9,vars:3,consts:[[1,"dg-btn","dg-btn-primary","dg-btn-sm",3,"click"],[4,"ngIf","ngIfElse"],["loading",""],[1,"messages"],[4,"ngFor","ngForOf"]],template:function(e,i){if(1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.fetchItems()}),t._uU(1,"Fetch Items"),t.qZA(),t.TgZ(2,"button",0),t.NdJ("click",function(){return i.cancel()}),t._uU(3,"Cancel"),t.qZA(),t.YNc(4,L,3,3,"div",1),t.YNc(5,q,2,0,"ng-template",null,2,t.W1O),t.TgZ(7,"div",3),t.YNc(8,G,2,1,"div",4),t.qZA()),2&e){const r=t.MAs(6);t.xp6(4),t.Q6J("ngIf",i.loadingDone)("ngIfElse",r),t.xp6(4),t.Q6J("ngForOf",i.messages)}},dependencies:[a.sg,a.O5,a.Ov],styles:[".dg-btn[_ngcontent-%COMP%]{margin-bottom:12px;margin-right:8px}.messages[_ngcontent-%COMP%]{margin-top:8px}"]}),o})();class h extends c.cf{constructor(n){super({entities:[],activeId:""},{idKey:"id"}),this.activeItemsApiService=n}static itemsSelector(n){return n.entities}static activeIdSelector(n){return n.activeId}fetchItems(){return this.activeItemsApiService.fetchItems().pipe((0,x.b)(n=>{this.initialize(n)}))}}h.\u0275fac=function(n){return new(n||h)(t.LFG(Q))},h.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),(0,g.gn)([(0,c.aU)()],h.prototype,"fetchItems",null);let Q=(()=>{class o{fetchItems(){return(0,C.of)([{id:1,title:"Item1"},{id:2,title:"Item2"},{id:3,title:"Item3"}])}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function K(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"div",7)(2,"label",8),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.setActiveItem(s.id))}),t._uU(3),t.qZA()()()}if(2&o){const e=n.$implicit,i=t.oxw(2);t.ekj("active",i.activeItemsStore.activeId===e.id),t.xp6(3),t.Oqu(e.title)}}function B(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.clearActiveItem())}),t._uU(1,"Clear active"),t.qZA()}}function H(o,n){if(1&o&&(t.TgZ(0,"section",1)(1,"section",2)(2,"ul",3),t.YNc(3,K,4,3,"li",4),t.qZA()(),t.TgZ(4,"footer",5),t.YNc(5,B,2,0,"button",6),t.qZA()()),2&o){const e=n.ngIf,i=t.oxw();t.xp6(3),t.Q6J("ngForOf",e)("ngForTrackBy",i.activeItemsStore.trackByFn),t.xp6(2),t.Q6J("ngIf",i.activeItemsStore.activeId)}}let R=(()=>{class o{constructor(e){this.activeItemsStore=e,this.items$=this.activeItemsStore.select(h.itemsSelector),this.activeId$=this.activeItemsStore.select(h.activeIdSelector),this.activeEntity$=this.activeItemsStore.activeEntity$}ngOnInit(){this.activeItemsStore.fetchItems()}setActiveItem(e){this.activeItemsStore.setActive(e)}clearActiveItem(){this.activeItemsStore.setActive()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h))},o.\u0275cmp=t.Xpm({type:o,selectors:[["thy-store-active-example"]],decls:14,vars:15,consts:[["class","item-app",4,"ngIf"],[1,"item-app"],[1,"main"],[1,"item-list"],[3,"active",4,"ngFor","ngForOf","ngForTrackBy"],[1,"footer"],["class","clear-active",3,"click",4,"ngIf"],[1,"view"],[3,"click"],[1,"clear-active",3,"click"]],template:function(e,i){1&e&&(t.YNc(0,H,6,3,"section",0),t.ALo(1,"async"),t.TgZ(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.ALo(6,"json"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"async"),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"json"),t.ALo(13,"async"),t.qZA()),2&e&&(t.Q6J("ngIf",t.lcZ(1,5,i.items$)),t.xp6(3),t.hij("activeItemsStore.activeId :",i.activeItemsStore.activeId,""),t.xp6(2),t.hij("activeItemsStore.activeEntity:",t.lcZ(6,7,i.activeItemsStore.activeEntity),""),t.xp6(3),t.hij("activeItemsStore.activeId$:",t.lcZ(9,9,i.activeItemsStore.activeId$),""),t.xp6(3),t.hij("activeItemsStore.activeEntity$:",t.lcZ(12,11,t.lcZ(13,13,i.activeItemsStore.activeEntity$)),""))},dependencies:[a.sg,a.O5,a.Ov,a.Ts],styles:['button[_ngcontent-%COMP%]{margin:0;padding:0;border:0;background:none;font-size:100%;vertical-align:baseline;font-family:inherit;font-weight:inherit;color:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.item-app[_ngcontent-%COMP%]{background:#fff;margin:130px 0 40px;position:relative;box-shadow:0 2px 4px #0003,0 25px 50px #0000001a}.main[_ngcontent-%COMP%]{position:relative;z-index:2;border-top:1px solid #e6e6e6}.item-list[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}.item-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;font-size:24px;border-bottom:1px solid #ededed}.item-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{word-break:break-all;padding:15px 15px 15px 60px;display:block;line-height:1.2;transition:color .4s;font-weight:400;color:#484848}.item-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#6698ff1f}.item-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#6698ff}.footer[_ngcontent-%COMP%]{padding:10px 15px;height:20px;text-align:center;font-size:15px;border-top:1px solid #e6e6e6}.footer[_ngcontent-%COMP%]:before{content:"";position:absolute;right:0;bottom:0;left:0;height:50px;overflow:hidden;box-shadow:0 1px 1px #0003,0 8px 0 -3px #f6f6f6,0 9px 1px -3px #0003,0 16px 0 -6px #f6f6f6,0 17px 2px -6px #0003}.clear-active[_ngcontent-%COMP%], html[_ngcontent-%COMP%]   .clear-active[_ngcontent-%COMP%]:active{float:right;position:relative;line-height:19px;text-decoration:none;cursor:pointer}.clear-active[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 430px){.footer[_ngcontent-%COMP%]{height:50px}}']}),o})(),O=(()=>{class o extends c.yh{constructor(){super({user:{model:void 0,dirty:!1,status:"",errors:{}}},{name:"new-user"})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var X=p(7319),M=p(2773),W=p(5897);let V=(()=>{class o{constructor(e){this.formGroup=e,this.debounce=100,this.updating=!1,this.destroy$=new v.xQ}ngOnInit(){this.formGroup.valueChanges.pipe((0,X.x)((e,i)=>JSON.stringify(e)===JSON.stringify(i)),this.debounceChange()).subscribe(()=>{this.updateStateWithRawValue(!0)}),this.store.select(e=>e[this.thyStateKey])}updateStateWithRawValue(e){if(this.updating)return;let r={model:this.formGroup.control.getRawValue(),status:void 0};e&&(r.status=this.formGroup.status),this.updating=!0,this.store.setState(s=>({[`${this.thyStateKey}`]:Object.assign(Object.assign({},s[this.thyStateKey]),r)})),this.updating=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}debounceChange(){return"change"!==this.formGroup.control.updateOn||this.debounce<0?i=>i.pipe((0,M.R)(this.destroy$)):i=>i.pipe((0,W.b)(this.debounce),(0,M.R)(this.destroy$))}get form(){return this.formGroup.form}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.sg))},o.\u0275dir=t.lG2({type:o,selectors:[["","thyStoreForm",""]],inputs:{store:["thyStoreForm","store"],thyStateKey:"thyStateKey"}}),o})(),tt=(()=>{class o{constructor(e){this.userFormStore=e,this.newUserForm=new l.cw({name:new l.NI})}ngOnInit(){}onSubmit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["thy-store-form-example"]],features:[t._Bn([O])],decls:6,vars:5,consts:[["thyStateKey","user",3,"formGroup","thyStoreForm","ngSubmit"],["type","text","formControlName","name"],["type","submit"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t._UZ(1,"input",1),t.TgZ(2,"button",2),t._uU(3,"Create"),t.qZA()(),t._uU(4),t.ALo(5,"json")),2&e&&(t.Q6J("formGroup",i.newUserForm)("thyStoreForm",i.userFormStore),t.xp6(4),t.hij(" ",t.lcZ(5,3,i.userFormStore.snapshot.user),"\n"))},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,V,a.Ts]}),o})(),et=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[a.ez,l.u5]}),o})();p(8233);const nt={"thy-store-counter-example":S,"thy-store-todos-example":Z,"thy-store-tasks-example":N,"thy-store-cancellation-example":j,"thy-store-active-example":R,"thy-store-form-example":tt},it=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[a.ez,l.u5,l.UX,et,c.Lp.forFeature([u])]}),o})()}}]);