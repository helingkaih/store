<div class="dg-paragraph"><code>Store</code>存储的状态完全由使用者根据业务的需求划分，如果业务简单可以把所有的状态都存储在一个<code>Store</code>中，当然不建议这么做，推荐按照领域划分<code>Store</code>，不管<code>Store</code>如何划分，对于组件或者服务来说，建议根据需要选择状态，这样做的好处为：</div>
<ul>
<li>通过组件的状态选择器可以确定当前组件的状态依赖关系，提高代码可读性</li>
<li>只订阅组件依赖的数据触发脏检查，提高应用程序的性能</li>
</ul>
<p>在<code>Store</code>中，提供了<code>select()</code>函数选择需要的状态：</p>
<pre class="language-ts"><code class="language-ts"><div><span class="token keyword">const</span> todos$ <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token keyword">return</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></code></pre>
<p>函数定义如下：</p>
<pre class="language-ts"><code class="language-ts"><div>select<span class="token operator">&lt;</span>TResult<span class="token operator">></span><span class="token punctuation">(</span>selector<span class="token punctuation">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> TResult<span class="token punctuation">)</span><span class="token punctuation">:</span> Observable<span class="token operator">&lt;</span>TResult<span class="token operator">></span> <span class="token operator">|</span> Observable<span class="token operator">&lt;</span>TResult<span class="token operator">></span><span class="token punctuation">;</span></div></code></pre>
<p>如果选择器有复杂的计算逻辑，可能会有多处订阅，建议添加<code>shareReplay</code>管道。</p>
<pre class="language-ts"><code class="language-ts"><div><span class="token keyword">const</span> todos$ <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token keyword">return</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">shareReplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></code></pre>
